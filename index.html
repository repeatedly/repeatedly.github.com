
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Go ahead!</title>
  <meta name="author" content="Masahiro Nakagawa">

  
  <meta name="description" content="Fluentd is a flexible and robust event log collector, but Fluentd doesn&#8217;t provide own datastore and Web UI.
So if you want to search stored &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://repeatedly.github.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Go ahead!" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Go ahead!</a></h1>
  
    <h2>Memoization for Everything</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:repeatedly.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  


  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/works">Works</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/ja">Japanese</a></li>
</ul>

  

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/04/search-logs-using-fluentd-and-kibana/">Search logs using Fluentd and Kibana</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-17T00:12:00-07:00" pubdate data-updated="true">Apr 17<span>th</span>, 2013</time>
        
         | <a href="/2013/04/search-logs-using-fluentd-and-kibana/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://fluentd.org/">Fluentd</a> is a flexible and robust event log collector, but Fluentd doesn&#8217;t provide own datastore and Web UI.
So if you want to search stored events, then you can use Kibana and ElasticSearch :)</p>

<p><a href="http://www.elasticsearch.org/">ElasticSearch</a> is a easy to use Search Engine and <a href="http://kibana.org/">Kibana</a> is a great Web UI for ElasticSearch with <a href="http://logstash.net/">LogStash</a> format.</p>

<h2>Setup</h2>

<h3>Pre requirements</h3>

<ul>
<li>Java for ElasticSearch</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% java -version
</span><span class='line'>java version <span class="s2">&quot;1.6.0_45&quot;</span>
</span><span class='line'>Java<span class="o">(</span>TM<span class="o">)</span> SE Runtime Environment <span class="o">(</span>build 1.6.0_45-b06-451-11M4406<span class="o">)</span>
</span><span class='line'>Java HotSpot<span class="o">(</span>TM<span class="o">)</span> 64-Bit Server VM <span class="o">(</span>build 20.45-b01-451, mixed mode<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Ruby for Fluentd and Kibana</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% ruby --version
</span><span class='line'>ruby 1.9.3p385 <span class="o">(</span>2013-02-06 revision 39114<span class="o">)</span> <span class="o">[</span>x86_64-darwin12.2.1<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>I tested on Mac OSX Mountain Lion.</p>

<h3>ElasticSearch</h3>

<p>Downlod and extract package:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% curl -O https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.90.0.RC2.tar.gz
</span><span class='line'>% tar zxvf elasticsearch-0.90.0.RC2.tar.gz
</span><span class='line'>% <span class="nb">cd </span>elasticsearch-0.90.0.RC2/
</span></code></pre></td></tr></table></div></figure>


<p>Start ElasticSearch:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% ./bin/elasticsearch -f
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:46,212<span class="o">][</span>INFO <span class="o">][</span>node                     <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> <span class="o">{</span> 0.90.0.RC2<span class="o">}[</span>9307<span class="o">]</span>: initializing ...
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:46,217<span class="o">][</span>INFO <span class="o">][</span>plugins                  <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> loaded <span class="o">[]</span>, sites <span class="o">[]</span>
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:47,742<span class="o">][</span>INFO <span class="o">][</span>node                     <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> <span class="o">{</span> 0.90.0.RC2<span class="o">}[</span>9307<span class="o">]</span>: initialized
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:47,742<span class="o">][</span>INFO <span class="o">][</span>node                     <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> <span class="o">{</span> 0.90.0.RC2<span class="o">}[</span>9307<span class="o">]</span>: starting ...
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:47,810<span class="o">][</span>INFO <span class="o">][</span>transport                <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> bound_address <span class="o">{</span> inet<span class="o">[</span>/0:0:0:0:0:0:0:0%0:9300<span class="o">]}</span>, publish_address <span class="o">{</span> inet<span class="o">[</span>/192.168.1.51:9300<span class="o">]}</span>
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:50,853<span class="o">][</span>INFO <span class="o">][</span>cluster.service          <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> new_master <span class="o">[</span>Redeemer<span class="o">][</span>YTfatlm2SyC4CsCsmnXX2A<span class="o">][</span>inet<span class="o">[</span>/192.168.1.51:9300<span class="o">]]</span>, reason: zen-disco-join <span class="o">(</span>elected_as_master<span class="o">)</span>
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:50,888<span class="o">][</span>INFO <span class="o">][</span>discovery                <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> elasticsearch/YTfatlm2SyC4CsCsmnXX2A
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:50,898<span class="o">][</span>INFO <span class="o">][</span>http                     <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> bound_address <span class="o">{</span> inet<span class="o">[</span>/0:0:0:0:0:0:0:0%0:9200<span class="o">]}</span>, publish_address <span class="o">{</span> inet<span class="o">[</span>/192.168.1.51:9200<span class="o">]}</span>
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:50,898<span class="o">][</span>INFO <span class="o">][</span>node                     <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> <span class="o">{</span> 0.90.0.RC2<span class="o">}[</span>9307<span class="o">]</span>: started
</span><span class='line'><span class="o">[</span>2013-04-16 23:55:50,928<span class="o">][</span>INFO <span class="o">][</span>gateway                  <span class="o">]</span> <span class="o">[</span>Redeemer<span class="o">]</span> recovered <span class="o">[</span>0<span class="o">]</span> indices into cluster_state
</span></code></pre></td></tr></table></div></figure>


<h3>Kibana</h3>

<p>Download via <a href="http://kibana.org/intro.html">webpage</a> or clone repository from github.
Kibana is a Sinatra web application.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% git clone git://github.com/rashidkpc/Kibana.git
</span><span class='line'>% <span class="nb">cd </span>Kibana
</span><span class='line'>% bundle install --path vendor/bundle <span class="c"># &quot;gem install bundle&quot; is needed if you don&#39;t install bundle</span>
</span></code></pre></td></tr></table></div></figure>


<p>Start Kibana:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% bundle <span class="nb">exec </span>ruby kibana.rb
</span><span class='line'> <span class="o">==</span>  Sinatra/1.4.2 has taken the stage on 5601 <span class="k">for </span>development with backup from <span class="nv">Thin</span>
</span><span class='line'> <span class="o">=</span>&gt;  Thin web server <span class="o">(</span>v1.5.1 codename Straight Razor<span class="o">)</span>
</span><span class='line'> <span class="o">=</span>&gt;  Maximum connections <span class="nb">set </span>to <span class="nv">1024</span>
</span><span class='line'> <span class="o">=</span>&gt;  Listening on 127.0.0.1:5601, CTRL+C to stop
</span></code></pre></td></tr></table></div></figure>


<p>You can change Kibana configuration via <code>KibanaConfig.rb</code>.</p>

<h3>Fluentd</h3>

<p>Install Fluentd and <a href="https://github.com/uken/fluent-plugin-elasticsearch">ElasticSearch plugin</a>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% gem install fluentd fluent-plugin-elasticsearch
</span></code></pre></td></tr></table></div></figure>


<p>Fluentd configuration is below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='apache'><span class='line'><span class="c"># es.conf</span>
</span><span class='line'><span class="nt">&lt;source&gt;</span>
</span><span class='line'>  <span class="nb">type</span> forward
</span><span class='line'><span class="nt">&lt;/source&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;match</span> <span class="s">es.**</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nb">type</span> elasticsearch
</span><span class='line'>  <span class="err">logstash_</span><span class="nb">format</span> true
</span><span class='line'>  <span class="err">flush_</span><span class="nb">interval</span> <span class="m">10</span>s # for testing
</span><span class='line'><span class="nt">&lt;/match&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>fluent-plugin-elasticsearch provides <code>logstash_format</code> option.
It enables Kibana to search stored events in ElasticSearch.</p>

<p>Start Fluentd:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% fluentd -c es.conf
</span><span class='line'>2013-04-17 00:03:51 -0700 <span class="o">[</span>info<span class="o">]</span>: starting fluentd-0.10.33
</span><span class='line'>2013-04-17 00:03:51 -0700 <span class="o">[</span>info<span class="o">]</span>: reading config file <span class="nv">path</span> <span class="o">=</span> <span class="s2">&quot;es.conf&quot;</span>
</span><span class='line'>2013-04-17 00:03:51 -0700 <span class="o">[</span>info<span class="o">]</span>: using configuration file: &lt;ROOT&gt;
</span><span class='line'>  &lt;<span class="nb">source</span>&gt;
</span><span class='line'>    <span class="nb">type </span>forward
</span><span class='line'>  &lt;/source&gt;
</span><span class='line'>  &lt;match es.**&gt;
</span><span class='line'>    <span class="nb">type </span>elasticsearch
</span><span class='line'>    logstash_format <span class="nb">true</span>
</span><span class='line'><span class="nb">    </span>flush_interval 10s
</span><span class='line'>  &lt;/match&gt;
</span><span class='line'>&lt;/ROOT&gt;
</span><span class='line'>2013-04-17 00:03:51 -0700 <span class="o">[</span>info<span class="o">]</span>: adding <span class="nb">source type</span> <span class="o">=</span> <span class="s2">&quot;forward&quot;</span>
</span><span class='line'>2013-04-17 00:03:51 -0700 <span class="o">[</span>info<span class="o">]</span>: adding match <span class="nv">pattern</span> <span class="o">=</span> <span class="s2">&quot;es.**&quot;</span> <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;elasticsearch&quot;</span>
</span><span class='line'>2013-04-17 00:03:51 -0700 <span class="o">[</span>info<span class="o">]</span>: listening fluent socket on 0.0.0.0:24224
</span></code></pre></td></tr></table></div></figure>


<h2>Store and Search events</h2>

<p>Send some events to Fluentd.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>% <span class="nb">echo</span> <span class="s1">&#39;{&quot;message&quot;:&quot;Hello!&quot;}&#39;</span> | fluent-cat es.event
</span><span class='line'>% <span class="nb">echo</span> <span class="s1">&#39;{&quot;message&quot;:&quot;D&quot;}&#39;</span> | fluent-cat es.event
</span><span class='line'>% <span class="nb">echo</span> <span class="s1">&#39;{&quot;message&quot;:&quot;Ruby&quot;}&#39;</span> | fluent-cat es.event
</span><span class='line'>% <span class="nb">echo</span> <span class="s1">&#39;{&quot;message&quot;:&quot;Elastic!!&quot;}&#39;</span> | fluent-cat es.event
</span></code></pre></td></tr></table></div></figure>


<p>After Fluentd flushed received events to ElasticSearch, you can search stored events via Kibana!</p>

<p><img src="/images/kibana_and_fluentd.png" title="&#34;Kibana and Fluentd&#34;" alt="&#34;Kibana and Fluentd&#34;"></p>

<h2>Conclusion</h2>

<p>This article introduced Fluent and Kibana (with ElasticSearch) combination to search events.
Above example is no tuning. If you use these components in production, then
maybe need to modify some configurations (e.g. JVM, ElasticSearch, Fluentd buffer and etc).</p>

<p>But these components are easy to setup and work fine. So you can try this framework soon :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/03/the-basics-of-fluentd/">The basics of Fluentd</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-09T13:54:00-08:00" pubdate data-updated="true">Mar 9<span>th</span>, 2013</time>
        
         | <a href="/2013/03/the-basics-of-fluentd/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>On Mar. 7th, Fluentd meetup in Fukuoka was held at OnRAMP.</p>

<p><a href="http://www.zusaar.com/event/501053">Fluentd meetup in Fukuoka</a> (in japanese)</p>

<p>In this event, I presented <strong>The basics of Fluentd</strong>.
The purpose of presentation shares Fluentd concept and basic features. I hope this presentation helps your understading of Fluentd.</p>

<iframe src="http://www.slideshare.net/slideshow/embed_code/17001359?rel=0" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen webkitallowfullscreen mozallowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="http://www.slideshare.net/treasure-data/the-basics-of-fluentd" title="The basics of fluentd" target="_blank">The basics of fluentd</a> </strong> from <strong><a href="http://www.slideshare.net/treasure-data" target="_blank">Treasure Data, Inc.</a></strong> </div></p>

<p>Thanks to matsuzaki-san and hashimoto-san for meetup setup and
thank you everyone for your participation!</p>

<p>I had a great time at Fukuoka :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/02/ltsv-for-d/">LTSV for D</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-10T04:10:00-08:00" pubdate data-updated="true">Feb 10<span>th</span>, 2013</time>
        
         | <a href="/2013/02/ltsv-for-d/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this week, Shinji Tanaka announced <a href="http://ltsv.org/">Labeled Tab-separated Values (LTSV)</a>.
LTSV is the flexible and robust row oriented format.</p>

<p>I just implemented ltsv-d for D programming language.</p>

<p><a href="http://github.com/repeatedly/ltsv-d">LTSV for D</a></p>

<p>ltsv-d provides <code>fromLTSV</code> and <code>toLTSV</code> functions.</p>

<p><code>fromLTSV</code> for parsing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='d'><span class='line'><span class="k">auto</span> <span class="n">apacheLog</span> <span class="p">=</span> <span class="s">&quot;host:127.0.0.1\tident:-\tuser:foo\ttime:[10/Oct/2000:13:55:36 -0700]\treq:GET /apache.gif HTTP/1.0\tstatus:200\tsize:777\treferer:http://www.example.com/start.html\tua:Mozilla/4.08 [en] (Win98; I ;Nav)&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">auto</span> <span class="n">record</span> <span class="p">=</span> <span class="n">fromLTSV</span><span class="p">(</span><span class="n">apacheLog</span><span class="p">);</span>
</span><span class='line'><span class="n">writeln</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s">&quot;host&quot;</span><span class="p">]);</span> <span class="c1">// &quot;127.0.0.1&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>toLTSV</code> for dumping:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='d'><span class='line'><span class="k">auto</span> <span class="n">line</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">:</span><span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="s">&quot;hoge&quot;</span><span class="p">:</span><span class="s">&quot;fuga&quot;</span><span class="p">,</span> <span class="s">&quot;piyo&quot;</span><span class="p">:</span><span class="s">&quot;puyo&quot;</span><span class="p">].</span><span class="n">toLTSV</span><span class="p">();</span>
</span><span class='line'><span class="n">writeln</span><span class="p">(</span><span class="n">line</span><span class="p">);</span> <span class="c1">// &quot;foo:bar\thoge:fuga\tpiyo:puyo&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Enjoy LTSV!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/01/hadoop-conference-japan-2013-winter/">Hadoop Conference Japan 2013 Winter</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-22T18:09:00-08:00" pubdate data-updated="true">Jan 22<span>nd</span>, 2013</time>
        
         | <a href="/2013/01/hadoop-conference-japan-2013-winter/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We are Hive Logo Lovers!</p>

<p><img src="/images/hive_in_hcj13w.jpg" title="&#34;Original Hive T shirt&#34;" alt="&#34;Original Hive T shirt&#34;"></p>

<p>Event Link: <a href="http://hcj2013w.eventbrite.com/">Hadoop Conference Japan 2013 Winter</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/01/yajl-d/">yajl-d</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-20T05:27:00-08:00" pubdate data-updated="true">Jan 20<span>th</span>, 2013</time>
        
         | <a href="/2013/01/yajl-d/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/repeatedly/yajl-d">yajl-d</a> is the D binding for <a href="http://lloyd.github.com/yajl/">YAJL</a>.</p>

<p>YAJL provides the stream JSON parsing and some extra features, e.g. allow comments.</p>

<p>yajl-d also provides the JSON encoding and stream decoding.
yajl-d is 2 - 3 times faster than std.json (try simple benchmark in example directory).</p>

<p>Following code is basic form:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='d'><span class='line'><span class="k">import</span> <span class="n">yajl</span><span class="p">.</span><span class="n">yajl</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// yajl-d can serialize / deserialize D object.</span>
</span><span class='line'><span class="k">struct</span> <span class="n">Hoge</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">ulong</span> <span class="n">id</span><span class="p">;</span>
</span><span class='line'>    <span class="nb">string</span> <span class="n">word</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">bool</span> <span class="n">yes</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// {&quot;id&quot;:100,&quot;word&quot;:&quot;hey!&quot;,&quot;yes&quot;:true}</span>
</span><span class='line'><span class="n">Hoge</span> <span class="n">hoge1</span> <span class="p">=</span> <span class="n">Hoge</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&quot;hey!&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'><span class="n">Hoge</span> <span class="n">hoge2</span> <span class="p">=</span> <span class="n">decode</span><span class="p">!</span><span class="n">Hoge</span><span class="p">(</span><span class="n">encode</span><span class="p">(</span><span class="n">hoge1</span><span class="p">));</span>
</span><span class='line'><span class="k">assert</span><span class="p">(</span><span class="n">hoge1</span> <span class="p">==</span> <span class="n">hoge2</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>encode</code> and <code>decode</code> are the wrapper of <code>Encoder</code> and <code>Decoder</code>. If you want to know more details of <code>Encoder</code> and <code>Decoder</code>. See README and the DDoc.</p>

<p>yajl-d has already listed in the official site.
Thanks to Lloyd!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/2/">&larr; Older</a>
    
    <a href="/archives">Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/04/search-logs-using-fluentd-and-kibana/">Search logs using Fluentd and Kibana</a>
      </li>
    
      <li class="post">
        <a href="/ja/2013/03/getting-started-with-storm/">Stormをはじめよう</a>
      </li>
    
      <li class="post">
        <a href="/ja/2013/03/the-architecture-of-data-analytics-paas-on-aws-jaws-days-2013-day2/">AWSを使ったデータ解析PaaSの裏側</a>
      </li>
    
      <li class="post">
        <a href="/2013/03/the-basics-of-fluentd/">The basics of Fluentd</a>
      </li>
    
      <li class="post">
        <a href="/2013/02/ltsv-for-d/">LTSV for D</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/repeatedly">@repeatedly</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'repeatedly',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("repeatedly", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/repeatedly" class="twitter-follow-button" data-show-count="false">Follow @repeatedly</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Masahiro Nakagawa -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'repeatedly';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
